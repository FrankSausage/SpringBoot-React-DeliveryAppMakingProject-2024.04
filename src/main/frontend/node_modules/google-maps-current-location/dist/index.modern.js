class t{constructor(t,o){var i,l,n,s,e,r,c,a,h,d,u,p;this.map=void 0,this.options=void 0,this.controlUI=void 0,this.controlInnerSymbol=void 0,this.map=t,this.options=o;const{buttonStyle:m}=o,y="translateY(-50%) translateX(-50%)",g=document.createElement("div");g.style.margin=null!=(i=null==m?void 0:m.mainMargin)?i:"10px",this.controlUI=document.createElement("button"),this.controlUI.style.backgroundColor=null!=(l=null==m?void 0:m.backgroundColor)?l:"#fff",this.controlUI.style.border=null!=(n=null==m?void 0:m.border)?n:"none",this.controlUI.style.borderRadius=null!=(s=null==m?void 0:m.borderRadius)?s:"0px",this.controlUI.style.outline=null!=(e=null==m?void 0:m.outline)?e:"none",this.controlUI.style.width=null!=(r=null==m?void 0:m.height)?r:"40px",this.controlUI.style.height=null!=(c=null==m?void 0:m.height)?c:"40px",this.controlUI.style.boxShadow=null!=(a=null==m?void 0:m.boxShadow)?a:"0 1px 4px rgba(0,0,0,0.3)",this.controlUI.style.cursor=null!=(h=null==m?void 0:m.cursor)?h:"pointer",this.controlUI.style.padding="0px",this.controlUI.style.display="flex",this.controlUI.title="Your Location",g.appendChild(this.controlUI);const v=document.createElement("img");v.src=`data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2224px%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20fill%3D%22%23${null!=(d=null==m||null==(u=m.symbolColor)?void 0:u.replace("#",""))?d:"6F6F6F"}%22%3E%3Cpath%20d%3D%22M0%200h24v24H0z%22%20fill%3D%22none%22%2F%3E%3Cpath%20d%3D%22M20.94%2011c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83%203.52%203.52%206.83%203.06%2011H1v2h2.06c.46%204.17%203.77%207.48%207.94%207.94V23h2v-2.06c4.17-.46%207.48-3.77%207.94-7.94H23v-2h-2.06zM12%2019c-3.87%200-7-3.13-7-7s3.13-7%207-7%207%203.13%207%207-3.13%207-7%207z%22%2F%3E%3C%2Fsvg%3E`,v.style.height="75%",v.style.position="absolute",v.style.top="50%",v.style.left="50%",v.style.transform=y,this.controlUI.appendChild(v),this.controlInnerSymbol=document.createElement("div"),this.controlInnerSymbol.style.backgroundColor=null!=(p=null==m?void 0:m.symbolColor)?p:"#6F6F6F",this.controlInnerSymbol.style.height="35%",this.controlInnerSymbol.style.width="35%",this.controlInnerSymbol.style.borderRadius="50%",this.controlInnerSymbol.style.position="absolute",this.controlInnerSymbol.style.top="50%",this.controlInnerSymbol.style.left="50%",this.controlInnerSymbol.style.transform=y,this.controlUI.appendChild(this.controlInnerSymbol),null!=m&&m.buttonPosition?t.controls[null==m?void 0:m.buttonPosition].push(g):t.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(g)}setEnabled(t=!0){this.controlUI.disabled=!t}animate(t){if(t)this.controlInnerSymbol.animate([{opacity:"1"},{opacity:"0"},{opacity:"1"}],{duration:1e3,iterations:Infinity});else{const t=this.controlInnerSymbol.getAnimations();t.length>0&&"running"===t[0].playState&&t[0].cancel()}}setOnClickListener(t){this.controlUI.onclick=t}}class o{constructor(t,o={}){var i,l,n,s,e,r,c,a,h;this.map=void 0,this.options=void 0,this.innerCircle=void 0,this.outerCircle=void 0,this.map=t,this.options=o;const{markerStyle:d}=o;this.innerCircle=new google.maps.Marker({map:t,clickable:null!=(i=null==d?void 0:d.clickable)&&i,cursor:null!=(l=null==d?void 0:d.cursor)?l:"pointer",draggable:null!=(n=null==d?void 0:d.draggable)&&n,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:null!=(s=null==d?void 0:d.fillColor)?s:"#4A89F3",fillOpacity:1,scale:null!=(e=null==d?void 0:d.scale)?e:6,strokeWeight:null!=(r=null==d?void 0:d.strokeWeight)?r:2,strokeColor:null!=(c=null==d?void 0:d.strokeColor)?c:"white"},optimized:!1,zIndex:3}),this.outerCircle=new google.maps.Circle({map:t,fillColor:null!=(a=null==(h=o.markerStyle)?void 0:h.fillColor)?a:"#4A89F3",fillOpacity:.1,strokeWeight:0}),this.outerCircle.bindTo("center",this.innerCircle,"position")}update(t,o=!1){const i=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);this.innerCircle.setPosition(i),this.options.showAccuracyRadius||(this.outerCircle.setCenter(i),this.outerCircle.setRadius(t.coords.accuracy)),o&&this.map.setCenter(new google.maps.LatLng(t.coords.latitude,t.coords.longitude))}center(){const t=this.innerCircle.getPosition();t&&this.map.setCenter(t)}}class i{constructor(i,l={}){this.controlUI=void 0,this.locationMarker=void 0,this.map=void 0,this.positionCount=void 0,this.positionOptions=void 0,this.watchId=void 0,this.watchPositionFn=void 0,this.map=i,this.positionOptions={enableHighAccuracy:!0},this.locationMarker=new o(i,l),this.controlUI=new t(i,l),this.positionCount=0,this.watchId=0,this.watchPositionFn=l.watchPositionFn||((t,o,i)=>navigator.geolocation.watchPosition(t,o,i)),this.controlUI.setOnClickListener(()=>{this.watchId?this.locationMarker.center():(this.controlUI.setEnabled(!1),this.controlUI.animate(!0),this.startWatchPosition())})}startWatchPosition(){const t=this.watchPositionFn(t=>{this.updatePosition(t)},t=>{this.setError(t)},this.positionOptions);t instanceof Promise?t.then(t=>this.watchId=t):this.watchId=t}updatePosition(t){this.locationMarker.update(t,1==++this.positionCount),this.controlUI.setEnabled(!0),this.controlUI.animate(!1)}setError(t){this.watchId=void 0,this.controlUI.setEnabled(!0),this.controlUI.animate(!1),alert(t.message)}}function l(t,o={}){return new i(t,o)}export{l as default};
//# sourceMappingURL=index.modern.js.map
