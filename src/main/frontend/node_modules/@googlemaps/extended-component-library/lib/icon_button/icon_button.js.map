{"version":3,"file":"icon_button.js","sourceRoot":"","sources":["../../src/icon_button/icon_button.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {css, html, nothing, PropertyValues} from 'lit';\nimport {customElement, property, queryAssignedNodes, state} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {when} from 'lit/directives/when.js';\n\nimport {BaseComponent} from '../base/base_component.js';\nimport {getTypeScaleSizeFromPx, GMPX_BORDER_SEPARATOR, GMPX_COLOR_ON_PRIMARY, GMPX_COLOR_PRIMARY, GMPX_FONT_CAPTION, GMPX_FONT_SIZE_BASE, GMPX_FONT_TITLE_MEDIUM} from '../base/common_styles.js';\nimport {WebFont, WebFontController} from '../base/web_font_controller.js';\n\n/**\n * The default icon to show when icon is not specified; this icon will only be\n * rendered if the button has no label or is in a condensed layout.\n */\nconst DEFAULT_ICON = 'add';\n\n/** Names of variants supported by the Icon Button component. */\nconst BUTTON_VARIANTS: ReadonlyArray<IconButton['variant']> =\n    Object.freeze(['outlined', 'filled']);\n\n/** Multiplier to scale margins and paddings based on font size. */\nconst SPACING_MULTIPLIER = 0.5;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'gmpx-icon-button': IconButton;\n  }\n}\n\n/**\n * The icon button component is used for actions in the UI that help users get\n * things done with a single tap. It contains an icon and a text label.\n *\n * This element is designed to be visually consistent when used with other\n * components in the Extended Component Library. For example, Icon Buttons can\n * be used in the `action` slot of the [Place\n * Overview](../place_overview/README.md) component to provide a consistent look\n * and feel.\n *\n * ![](doc_src/icon-button.png)\n *\n * @slot - Content to display as the buttonâ€™s label.\n *\n * @cssproperty [--gmpx-color-primary] - Button text and outline color in the\n * `outlined` variant, or background color in `filled` variant.\n * @cssproperty [--gmpx-color-on-primary] - Button text color in `filled`\n * variant.\n * @cssproperty [--gmpx-color-outline] - Outline color.\n * @cssproperty [--gmpx-font-size-base] - Font size for the button.\n * @cssproperty [--gmpx-font-family-headings] - Font face for the button, except\n * for condensed mode.\n * @cssproperty [--gmpx-font-family-base] - Font face used when the button is in\n * condensed mode.\n */\n@customElement('gmpx-icon-button')\nexport class IconButton extends BaseComponent {\n  static override styles = css`\n    .container {\n      all: unset;\n      color: ${GMPX_COLOR_PRIMARY};\n      cursor: pointer;\n      text-align: center;\n    }\n\n    .icon {\n      font-size: ${getTypeScaleSizeFromPx(18)};\n    }\n\n    .layout.condensed {\n      display: flex;\n      flex-direction: column;\n    }\n\n    .layout.condensed .pill {\n      align-self: center;\n    }\n\n    .layout.condensed .label-container {\n      font: ${GMPX_FONT_CAPTION};\n      margin-top: calc(${GMPX_FONT_SIZE_BASE} * ${SPACING_MULTIPLIER});\n    }\n\n    .layout.no-label .label-container {\n      margin: 0;\n    }\n\n    .layout:not(.condensed):not(.no-label) .pill {\n      padding-left: calc(${GMPX_FONT_SIZE_BASE} * ${SPACING_MULTIPLIER});\n      padding-right: calc(${GMPX_FONT_SIZE_BASE} * ${SPACING_MULTIPLIER});\n    }\n\n    .pill {\n      align-items: center;\n      border-radius: calc(${GMPX_FONT_SIZE_BASE} * (1 + ${SPACING_MULTIPLIER}));\n      display: flex;\n      font: ${GMPX_FONT_TITLE_MEDIUM};\n      justify-content: center;\n      overflow: hidden;\n      padding: calc(${GMPX_FONT_SIZE_BASE} * ${SPACING_MULTIPLIER} / 2);\n      position: relative;\n    }\n\n    .pill > * {\n      margin: calc(${GMPX_FONT_SIZE_BASE} * ${SPACING_MULTIPLIER} / 2);\n    }\n\n    .pill.filled {\n      background-color: ${GMPX_COLOR_PRIMARY};\n      color: ${GMPX_COLOR_ON_PRIMARY};\n    }\n\n    .pill.outlined {\n      border: ${GMPX_BORDER_SEPARATOR};\n    }\n\n    .pill .overlay {\n      inset: 0;\n      margin: 0;\n      opacity: 0;\n      position: absolute;\n    }\n\n    .pill.outlined .overlay {\n      background-color: ${GMPX_COLOR_PRIMARY};\n    }\n\n    .pill.filled .overlay {\n      background-color: ${GMPX_COLOR_ON_PRIMARY};\n    }\n\n    .container:hover .overlay {\n      opacity: 0.08;\n    }\n\n    .container:focus .overlay {\n      opacity: 0.24;\n    }\n\n    .container:active .overlay {\n      opacity: 0.32;\n    }\n  `;\n\n  // Set up focus delegation; see\n  // https://lit.dev/docs/components/shadow-dom/#setting-shadowrootoptions.\n  /** @ignore */\n  static override shadowRootOptions = {\n    ...BaseComponent.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  /**\n   * Indicates the availability and type of interactive popup element that can\n   * be triggered by the button. See:\n   * https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-haspopup.\n   *\n   * This attribute has no effect when `href` is set.\n   */\n  @property({attribute: 'aria-haspopup', reflect: true, type: String})\n  override ariaHasPopup: 'true'|'dialog'|'menu'|'listbox'|'tree'|'grid'|\n      'false' = 'false';\n\n  /**\n   * A description that gets read by assistive devices. In the case of icon-only\n   * buttons, you should always include an ARIA label for optimal accessibility.\n   */\n  @property({attribute: 'aria-label', reflect: true, type: String})\n  override ariaLabel: string|null = null;\n\n  /**\n   * Whether to render the button in a condensed layout, where the label appears\n   * below the icon.\n   */\n  @property({reflect: true, type: Boolean}) condensed = false;\n\n  /**\n   * Set this attribute to a URL to have the Icon Button open it in a new tab,\n   * when clicked. Alternatively, specify on-click behavior for this component\n   * by attaching an event listener.\n   *\n   * Per accessibility best practice, the component will render its content\n   * inside an `<a>` instead of `<button>` element when this attribute is set.\n   */\n  @property({reflect: true, type: String}) href?: string;\n\n  /**\n   * Name of icon from [Material Symbols Set](https://fonts.google.com/icons) to\n   * display before the button label.\n   *\n   * If icon is unspecified, then a \"+\" icon will be rendered by default. This\n   * default icon is omitted if button has a label or other content and is not\n   * in condensed layout.\n   */\n  @property({reflect: true, type: String}) icon?: string;\n\n  /** Specifies the display style of the button. */\n  @property({reflect: true, type: String})\n  variant: 'outlined'|'filled' = 'outlined';\n\n  @state() private hasLabel = false;\n\n  @queryAssignedNodes({flatten: true})\n  private readonly defaultSlotNodes?: Node[];\n\n  protected readonly fontLoader = new WebFontController(\n      this, [WebFont.GOOGLE_SANS_TEXT, WebFont.MATERIAL_SYMBOLS_OUTLINED]);\n\n  protected override willUpdate(changedProperties: PropertyValues<this>) {\n    // If variant is set to an unsupported value, reset to default & log error.\n    if (changedProperties.has('variant') &&\n        !BUTTON_VARIANTS.includes(this.variant)) {\n      this.logger.error(\n          `Value \"${this.variant}\" for attribute \"variant\" is invalid. ` +\n          `Acceptable choices are ${\n              BUTTON_VARIANTS.map((size) => `\"${size}\"`).join(', ')}.`);\n      this.variant = 'outlined';\n    }\n  }\n\n  protected override render() {\n    if (this.href) {\n      return html`\n        <a\n          aria-label=${this.ariaLabel ?? nothing}\n          class=\"container\"\n          href=${this.href}\n          target=\"_blank\"\n        >${this.renderContent()}</a>\n      `;\n    }\n\n    return html`\n      <button\n        aria-haspopup=${this.ariaHasPopup}\n        aria-label=${this.ariaLabel ?? nothing}\n        class=\"container\"\n      >${this.renderContent()}</button>\n    `;\n  }\n\n  protected override updated() {\n    // If the aria-label attribute is set, hide it from the a11y tree. Otherwise\n    // the component and its shadow DOM content show up as duplicate nodes with\n    // the same aria-label.\n    this.role = this.ariaLabel != null ? 'none' : null;\n  }\n\n  private renderContent() {\n    const icon = this.icon ||\n        (!this.hasLabel || this.condensed ? DEFAULT_ICON : undefined);\n\n    // clang-format off\n    return html`\n      <div class=\"layout ${classMap({\n        'condensed': this.condensed,\n        'no-label': !this.hasLabel,\n      })}\">\n        <div class=\"pill ${classMap({\n          'filled': this.variant === 'filled',\n          'outlined': this.variant !== 'filled',\n        })}\">\n          <div class=\"overlay\"></div>\n          ${when(icon, () => html`\n            <span aria-hidden=\"true\" class=\"icon material-symbols-outlined\">\n              ${icon}\n            </span>\n          `)}\n          ${when(!this.condensed, () => this.renderLabel())}\n        </div>\n        ${when(this.condensed, () => this.renderLabel())}\n      </div>\n    `;\n    // clang-format on\n  }\n\n  private renderLabel() {\n    return html`\n      <div class=\"label-container\">\n        <slot @slotchange=${this.handleSlotChange}></slot>\n      </div>\n    `;\n  }\n\n  private handleSlotChange() {\n    this.hasLabel =\n        Boolean(this.defaultSlotNodes?.map((node) => node.textContent ?? '')\n                    .join('')\n                    .trim());\n  }\n}\n"]}