{"version":3,"file":"store_locator.js","sourceRoot":"","sources":["../../src/store_locator/store_locator.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport '../split_layout/split_layout.js';\nimport '../overlay_layout/overlay_layout.js';\nimport '../route_overview/route_overview.js';\nimport '../place_overview/place_overview.js';\nimport '../place_picker/place_picker.js';\nimport '../icon_button/icon_button.js';\nimport '../place_building_blocks/place_directions_button/place_directions_button.js';\n\n// Placeholder for objectProperty (google3-only)\nimport {html, nothing} from 'lit';\nimport {customElement, property, query, state} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {join} from 'lit/directives/join.js';\nimport {ref} from 'lit/directives/ref.js';\nimport {repeat} from 'lit/directives/repeat.js';\n\nimport {APILoader} from '../api_loader/api_loader.js';\nimport {BaseComponent} from '../base/base_component.js';\nimport {LocalizationController} from '../base/localization_controller.js';\nimport {WebFont, WebFontController} from '../base/web_font_controller.js';\nimport type {OverlayLayout} from '../overlay_layout/overlay_layout.js';\nimport type {PlacePicker} from '../place_picker/place_picker.js';\nimport type {LatLng, MapElement, Place, PlaceResult} from '../utils/googlemaps_types.js';\n\nimport {DistanceInfo, DistanceMeasurer, DistanceSource} from './distances.js';\nimport type {InternalListing, StoreLocatorListing} from './interfaces.js';\nimport {FeatureSet, QuickBuilderConfiguration} from './interfaces.js';\nimport {convertLocations, getFeatureSet, getMapOptions} from './quick_builder.js';\nimport {storeLocatorStyles} from './store_locator_styles.js';\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'gmpx-store-locator': StoreLocator;\n  }\n}\n\n// @ts-ignore - Unused interface, but required for type checking.\ninterface HTMLElementTagNameMap {\n  'gmp-map': google.maps.MapElement;\n  'gmp-advanced-marker': google.maps.marker.AdvancedMarkerElement;\n}\n\nconst DEFAULT_MAP_OPTIONS: Partial<google.maps.MapOptions> = {\n  mapTypeControl: false,\n  maxZoom: 17,\n  streetViewControl: false\n};\n\n/**\n * The store locator component displays an experience where your website's users\n * can browse a list of locations, find the nearest one, and view details.\n *\n * While store locations are the most common use case, you can use this\n * component to show many nearby points of interest like parks, ATMs, or gas\n * stations.\n *\n * To use `<gmpx-store-locator>`, pass it a JavaScript array containing the\n * locations you want to present. Each location, called a listing, is defined as\n * an object with the following properties:\n *\n * ```\n * interface StoreLocatorListing {\n *   // Name of the location or store\n *   title: string;\n *\n *   // Address lines, used when displaying the list.\n *   addressLines?: string[];\n *\n *   // Geographic coordinates of the location\n *   position: LatLng|LatLngLiteral;\n *\n *   // Place ID for this location, used to retrieve additional details\n *   placeId?: string;\n *\n *   // Optional list of additional actions to display with each location\n *   actions?: StoreLocatorAction[];\n * }\n *\n * interface StoreLocatorAction {\n *   // Button label for this action\n *   label: string;\n *\n *   // URI that will be opened in a new tab\n *   defaultUri?: string;\n * }\n * ```\n *\n * See below for a full example.\n *\n * @cssproperty [--gmpx-color-surface] - Background color.\n * @cssproperty [--gmpx-color-on-surface] - Main text color.\n * @cssproperty [--gmpx-color-on-surface-variant] - Color of less important text\n * such as captions.\n * @cssproperty [--gmpx-color-primary] - Color of buttons and icons.\n * @cssproperty [--gmpx-color-outline] - Button outline and divider color.\n * @cssproperty [--gmpx-fixed-panel-width-row-layout=28.5em] - Controls the side\n * panel width when the component is displayed in row direction. The map\n * width will adjust automatically to fill remaining space.\n * @cssproperty [--gmpx-fixed-panel-height-column-layout=65%] - Controls the\n * side panel height when the component is displayed in column direction. The\n * map height will adjust automatically to fill remaining space.\n * @cssproperty [--gmpx-font-family-base] - Font family for regular text.\n * @cssproperty [--gmpx-font-family-headings] - Font family for headings.\n * @cssproperty [--gmpx-font-size-base] - Text size, sets scale for the\n * component.\n * @cssproperty [--gmpx-hours-color-open] - Opening hours text color\n * when the place is open (`advanced` feature set only).\n * @cssproperty [--gmpx-hours-color-closed] - Opening hours text color\n * when the place is closed (`advanced` feature set only).\n * @cssproperty [--gmpx-rating-color] - Color of star rating icons in the\n * details view (`advanced` feature set only).\n * @cssproperty [--gmpx-rating-color-empty] - Background color of star\n * rating icons in the details view (`advanced` feature set only).\n */\n@customElement('gmpx-store-locator')\nexport class StoreLocator extends BaseComponent {\n  static override styles = storeLocatorStyles;\n\n  /**\n   * Chooses the capabilities of this store locator:\n   *\n   * * `'basic'` shows a list of locations with pins on a map.\n   *\n   * * `'intermediate'` adds a search input so users can find the location\n   * closest to them.\n   *\n   * * `'advanced'` brings in a Place details view to show photos, hours, and\n   * reviews for each location.\n   */\n  @property({attribute: 'feature-set', reflect: true})\n  featureSet: FeatureSet = FeatureSet.ADVANCED;\n\n  /**\n   * The Map ID of the map. See the [Map ID\n   * documentation](https://developers.google.com/maps/documentation/get-map-id)\n   * for more information.\n   */\n  @property({attribute: 'map-id', reflect: true}) mapId?: string;\n\n  /**\n   * List of locations to display in the store locator.\n   */\n  @property({attribute: false}) listings?: StoreLocatorListing[];\n\n  /**\n   * Overrides for the map options. Provide values for `center` and `zoom` to\n   * display a map when `listings` is empty.\n   */\n  @property({attribute: false})\n  mapOptions?: Partial<google.maps.MapOptions> = DEFAULT_MAP_OPTIONS;\n\n  @state() private internalListings: InternalListing[] = [];\n\n  @state() private selectedListing?: InternalListing;\n\n  @state() private searchLocation?: Place;\n\n  @state() private detailsPlaceId?: string;\n\n  @state() private initialized = false;\n\n  @query('gmpx-overlay-layout') private overlayLayout?: OverlayLayout;\n  @query('gmp-map') private mapElement?: MapElement;\n\n  protected readonly getMsg = LocalizationController.buildLocalizer(this);\n  protected readonly fontLoader = new WebFontController(\n      this, [WebFont.GOOGLE_SANS_TEXT, WebFont.MATERIAL_SYMBOLS_OUTLINED]);\n\n  private mapsCoreLibrary?: google.maps.CoreLibrary;\n  private userCountry?: string;\n  private readonly distanceMeasurer = new DistanceMeasurer(this);\n  private readonly listingDistances = new Map<InternalListing, DistanceInfo>();\n\n  constructor() {\n    super();\n    this.initialize();\n  }\n\n  /**\n   * Blocks Lit lifecycle methods until the component is async-initialized. All\n   * other component methods (except for the constructor) can expect that\n   * `this.initialized` is true.\n   */\n  protected override shouldUpdate(changedProperties: Map<string, unknown>) {\n    return this.initialized;\n  }\n\n  /**\n   * Notes on willUpdate():\n   * - This method will only be called when `this.initialized` is true.\n   * - Unable to use `PropertyValues<this>` as the TS type since we are checking\n   *   a private property.\n   * https://lit.dev/docs/components/lifecycle/#typescript-types-for-changedproperties\n   */\n  protected override willUpdate(changedProperties: Map<string, unknown>) {\n    if (changedProperties.has('listings') ||\n        changedProperties.has(/* @state */ 'initialized')) {\n      this.internalListings =\n          (this.listings ?? []).map((x) => this.createInternalListing(x));\n      this.listingDistances.clear();\n    }\n  }\n\n  protected override updated(changedProperties: Map<string, unknown>) {\n    // Perform map updates after the DOM has rendered, so the map element\n    // will exist.\n    if (changedProperties.has('listings') ||\n        changedProperties.has(/* @state */ 'initialized')) {\n      this.updateBounds();\n    }\n\n    if ((changedProperties.has('mapOptions') ||\n         changedProperties.has(/* @state */ 'initialized')) &&\n        this.mapOptions) {\n      this.mapElement?.innerMap?.setOptions(this.mapOptions);\n    }\n  }\n\n  protected override render() {\n    if (!this.initialized) return nothing;\n    return html`\n      <gmpx-split-layout>\n        <gmpx-overlay-layout slot=\"fixed\">\n          ${this.renderSidePanelMain()}\n          ${this.renderSidePanelOverlay()}\n        </gmpx-overlay-layout>\n        ${this.renderMapPanel()}\n      </gmpx-split-layout>\n    `;\n  }\n\n  /**\n   * Configures the Store Locator component from data generated by the [Quick\n   * Builder\n   * tool](https://console.cloud.google.com/google/maps-apis/build/locator-plus)\n   * in the Maps Console.\n   *\n   * @param configuration The configuration object generated by the Quick\n   *     Builder tool.\n   */\n  configureFromQuickBuilder(configuration: QuickBuilderConfiguration) {\n    this.listings = convertLocations(configuration);\n    this.featureSet = getFeatureSet(configuration);\n    this.mapOptions = getMapOptions(configuration);\n  }\n\n  /**\n   * Perform one-time initialization tasks; effectively an async constructor.\n   */\n  private async initialize() {\n    this.mapsCoreLibrary =\n        await APILoader.importLibrary('core', this) as google.maps.CoreLibrary;\n    this.initialized = true;\n  }\n\n  private createInternalListing(listing: StoreLocatorListing): InternalListing {\n    const placeResult: PlaceResult = {\n      place_id: listing.placeId,\n      name: listing.title,\n      formatted_address: listing.addressLines?.join(' '),\n      geometry: {location: new this.mapsCoreLibrary!.LatLng(listing.position)}\n    };\n    return {\n      ...listing,\n      placeResult,\n      uniqueKey: `${listing.placeId}:${listing.title}`\n    };\n  }\n\n  private isIntermediateOrBetter() {\n    return this.featureSet === FeatureSet.INTERMEDIATE ||\n        this.featureSet === FeatureSet.ADVANCED;\n  }\n\n  private async updateDistances(origin: LatLng|null|undefined) {\n    if (!this.isIntermediateOrBetter() || !origin ||\n        !this.internalListings.length) {\n      this.listingDistances.clear();\n    } else {\n      const units = (this.userCountry === 'US') ?\n          this.mapsCoreLibrary!.UnitSystem.IMPERIAL :\n          this.mapsCoreLibrary!.UnitSystem.METRIC;\n      const distances = await this.distanceMeasurer.computeDistances(\n          origin, this.internalListings.map(listing => listing.position),\n          units);\n      for (let i = 0; i < distances.length; i++) {\n        this.listingDistances.set(this.internalListings[i], distances[i]);\n      }\n    }\n    this.requestUpdate();\n  }\n\n  /** Updates the end user's location, used for travel times and sorting. */\n  private updateSearchLocation(event: Event) {\n    const place = (event.target as PlacePicker).value;\n    this.searchLocation = place ?? undefined;\n\n    // Update the locator's idea of the user's country, used for units.\n    if (place?.addressComponents) {\n      for (const component of place.addressComponents) {\n        if (component.types.indexOf('country') >= 0) {\n          this.userCountry = component.shortText ?? undefined;\n          break;\n        }\n      }\n    }\n\n    // Update map bounds to include the new location marker.\n    this.updateBounds();\n\n    // Update distances to this location\n    this.updateDistances(place?.location);\n  }\n\n  /**\n   * Updates the selected location.\n   *\n   * @returns true if the selected location was changed.\n   */\n  private selectLocation(listing: InternalListing|undefined): boolean {\n    if (this.selectedListing === listing) return false;\n    this.selectedListing = listing;\n    return true;\n  }\n\n  /** Updates the map bounds to markers. */\n  private async updateBounds() {\n    if (!this.internalListings.length) return;\n\n    const bounds = new this.mapsCoreLibrary!.LatLngBounds();\n    if (this.searchLocation?.location) {\n      bounds.extend(this.searchLocation.location);\n    }\n    for (const listing of this.internalListings) {\n      bounds.extend(listing.position);\n    }\n    this.mapElement?.innerMap?.fitBounds(bounds);\n  }\n\n  private renderSidePanelOverlay() {\n    if (this.featureSet === FeatureSet.ADVANCED) {\n      // clang-format off\n      return html`\n          <div slot=\"overlay\" id=\"details-panel\">\n            <button class=\"back-button\"\n                @click=${() => this.overlayLayout?.hideOverlay()}>\n              <span class=\"icon material-symbols-outlined\">arrow_back</span>\n              ${this.getMsg('LOCATOR_BACK_BUTTON_CTA')}\n            </button>\n            <gmpx-place-overview .place=${this.detailsPlaceId} google-logo-already-displayed>\n            </gmpx-place-overview>\n          </div>`;\n      // clang-format on\n    }\n    return nothing;\n  }\n\n  private renderListItem(listing: InternalListing) {\n    // UI display for travel distance.\n    const distanceInfo = this.listingDistances.get(listing);\n    const showDistance = distanceInfo?.text &&\n        distanceInfo.source === DistanceSource.DISTANCE_MATRIX;\n    const distanceHtml = showDistance ? distanceInfo.text : nothing;\n\n    // Action buttons.\n    const actionButtons = [];\n    if (this.featureSet === FeatureSet.ADVANCED) {\n      const showDetails = () => {\n        if (listing.placeId) {\n          this.detailsPlaceId = listing.placeId;\n          this.overlayLayout?.showOverlay();\n        }\n      };\n      actionButtons.push(html`\n          <gmpx-icon-button class=\"view-details\" @click=${showDetails}>\n            ${this.getMsg('LOCATOR_VIEW_DETAILS_CTA')}\n          </gmpx-icon-button>`);\n    }\n    for (const action of listing.actions ?? []) {\n      actionButtons.push(html`\n          <gmpx-icon-button icon=\"open_in_new\" .href=${\n          action.defaultUri ?? nothing}>\n            ${action.label}\n          </gmpx-icon-button>`);\n    }\n\n    // Clicking anywhere on the item selects this location.\n    // Additionally, a hidden button element makes this behavior\n    // accessible under tab navigation.\n    const selectCallback = () => {\n      const wasSelection = this.selectLocation(listing);\n      if (wasSelection && this.selectedListing && !this.searchLocation) {\n        this.mapElement?.innerMap?.panTo(this.selectedListing.position);\n      }\n    };\n    const liClick = selectCallback;\n    const selectButtonClick = (e: Event) => {\n      selectCallback();\n      e.stopPropagation();\n    };\n\n    // clang-format off\n    return html`\n      <li @click=${liClick}\n          class=${classMap({'selected': listing === this.selectedListing})}\n          ${ref((el?: Element) => { listing.listingElement = el; })}>\n        <gmpx-place-data-provider auto-fetch-disabled\n            .place=${listing.placeResult}>\n          <div class=\"result-item\">\n            <button class=\"select-location\" @click=${selectButtonClick}>\n              <h2 class=\"name\">\n                <gmpx-place-field-text field=\"displayName\"></gmpx-place-field-text>\n              </h2>\n            </button>\n            <div class=\"address\">\n              ${join(listing.addressLines ?? [], html`<br>`)}\n            </div>\n            <div class=\"actions\">\n              ${join(actionButtons, html``)}\n            </div>\n            <div class=\"distance\">${distanceHtml}</div>\n            <gmpx-place-directions-button condensed\n                .origin=${this.searchLocation?.location ?? undefined}>\n            </gmpx-place-directions-button>\n          </div>\n        </gmpx-place-data-provider>\n      </li>`;\n    // clang-format on\n  }\n\n  private renderSidePanelMain() {\n    let sortedListings = this.internalListings;\n    let headerText = this.getMsg('LOCATOR_LIST_SUBHEADING');\n    if (this.listingDistances.size > 0) {\n      headerText = this.getMsg('LOCATOR_LIST_SUBHEADING_WITH_SEARCH');\n\n      // Sort the listings with all Distance Matrix distances first, in order,\n      // then all geodesic distances, in order.\n      const distanceMatrixListings = this.internalListings.filter(\n          listing => this.listingDistances.get(listing)?.source ===\n              DistanceSource.DISTANCE_MATRIX);\n      const otherDistanceListings = this.internalListings.filter(\n          listing => this.listingDistances.get(listing)?.source !==\n              DistanceSource.DISTANCE_MATRIX);\n\n      const getDistance = (listing: InternalListing) =>\n          this.listingDistances.get(listing)?.value ?? Infinity;\n      const distanceSorter = (a: InternalListing, b: InternalListing) =>\n          getDistance(a) - getDistance(b);\n      sortedListings = [\n        ...distanceMatrixListings.sort(distanceSorter),\n        ...otherDistanceListings.sort(distanceSorter)\n      ];\n    }\n\n    // clang-format off\n    const header = this.featureSet === FeatureSet.BASIC ?\n        nothing :\n        html`\n        <header>\n          <h1 class=\"search-title\">\n            <span class=\"icon material-symbols-outlined\">distance</span>\n            ${this.getMsg('LOCATOR_LIST_HEADER')}\n          </h1>\n          <gmpx-place-picker for-map=\"main-map\" type=\"geocode\"\n              .placeholder=${this.getMsg('LOCATOR_SEARCH_PROMPT')}\n              @gmpx-placechange=${this.updateSearchLocation}>\n          </gmpx-place-picker>\n        </header>\n    `;\n\n    return html`\n        <div slot=\"main\" id=\"locations-panel\">\n          <div id=\"locations-panel-list\">\n            ${header}\n            <div class=\"section-name\">\n              ${headerText} (${sortedListings.length})\n            </div>\n            <div class=\"results\">\n              <ul id=\"location-results-list\">\n                ${repeat(\n                    sortedListings,\n                    (x) => x.uniqueKey,\n                    (x) => this.renderListItem(x))}\n              </ul>\n            </div>\n          </div>\n        </div>`;\n    // clang-format on\n  }\n\n  private renderSearchMarker() {\n    if (this.isIntermediateOrBetter() && this.searchLocation?.location) {\n      return html`\n          <gmp-advanced-marker\n              .position=${this.searchLocation.location}\n              title=\"${this.getMsg('LOCATOR_SEARCH_LOCATION_MARKER_TITLE')}\">\n            <svg viewbox=\"0 0 100 100\" class=\"search-pin\">\n              <circle cx=\"50\" cy=\"50\" r=\"50\"></circle>\n            </svg>\n          </gmp-advanced-marker>`;\n    }\n    return nothing;\n  }\n\n  private renderMapMarker(listing: InternalListing) {\n    // Pick a z-index to have the marker on top of the Route Overview.\n    const zIndex = 100;\n\n    const clickHandler = () => {\n      this.selectLocation(listing);\n      const li = listing.listingElement;\n      if (li) {\n        li.scrollIntoView({behavior: 'smooth', block: 'nearest'});\n      }\n    };\n    return html`\n        <gmp-advanced-marker\n            .position=${listing.position}\n            .title=${listing.title}\n            .zIndex=${zIndex}\n            gmp-clickable @gmp-click=${clickHandler}></gmp-advanced-marker>`;\n  }\n\n  private renderMapDirections() {\n    const originLatLng = this.searchLocation?.location;\n    const destinationLatLng = this.selectedListing?.position;\n    if (this.featureSet === FeatureSet.ADVANCED && originLatLng &&\n        destinationLatLng) {\n      // clang-format off\n      return html`\n      <gmpx-route-overview no-pin\n          .originLatLng=${originLatLng}\n          .destinationLatLng=${destinationLatLng}>\n      </gmpx-route-overview>`;\n      // clang-format on\n    }\n    return nothing;\n  }\n\n  private renderMapPanel() {\n    // clang-format off\n    return html`\n        <gmp-map slot=\"main\" id=\"main-map\" .mapId=${this.mapId ?? nothing}>\n          ${this.renderMapDirections()}\n          ${repeat(\n              this.internalListings,\n              (x) => x.uniqueKey,\n              (x) => this.renderMapMarker(x))}\n          ${this.renderSearchMarker()}\n        </gmp-map>`;\n    // clang-format on\n  }\n}\n"]}