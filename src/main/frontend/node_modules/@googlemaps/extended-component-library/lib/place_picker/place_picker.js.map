{"version":3,"file":"place_picker.js","sourceRoot":"","sources":["../../src/place_picker/place_picker.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Placeholder for objectProperty (google3-only)\nimport {css, html, PropertyValues} from 'lit';\nimport {customElement, property, query, state} from 'lit/decorators.js';\n\nimport {APILoader} from '../api_loader/api_loader.js';\nimport {BaseComponent} from '../base/base_component.js';\nimport {GMPX_COLOR_ON_SURFACE, GMPX_COLOR_PRIMARY, GMPX_COLOR_SURFACE, GMPX_FONT_BODY, GMPX_FONT_SIZE_BASE} from '../base/common_styles.js';\nimport {RequestErrorEvent} from '../base/events.js';\nimport {FocusController} from '../base/focus_controller.js';\nimport {LocalizationController} from '../base/localization_controller.js';\nimport {WebFont, WebFontController} from '../base/web_font_controller.js';\nimport {LAT_LNG_LITERAL_ATTRIBUTE_CONVERTER, STRING_ARRAY_ATTRIBUTE_CONVERTER} from '../utils/attribute_converters.js';\nimport {getDeepActiveElement} from '../utils/deep_element_access.js';\nimport {Deferred} from '../utils/deferred.js';\nimport type {Place, PlaceResult, PlacesLibrary} from '../utils/googlemaps_types.js';\nimport {isNotAvailableError, makePlaceFromPlaceResult, mapPlaceFieldsToPlaceResultFields} from '../utils/place_utils.js';\n\ntype Autocomplete = google.maps.places.Autocomplete;\ntype AutocompleteOptions = google.maps.places.AutocompleteOptions;\n\n/** Data field names in a `Place` that are fetched by Place Picker. */\nexport const PLACE_DATA_FIELDS = Object.freeze([\n  'addressComponents',\n  'adrFormatAddress',\n  'businessStatus',\n  'displayName',\n  'formattedAddress',\n  'googleMapsURI',\n  'iconBackgroundColor',\n  'location',\n  'photos',\n  'id',\n  'plusCode',\n  'svgIconMaskURI',\n  'types',\n  'utcOffsetMinutes',\n  'viewport',\n] as const);\n\n/** Data field names in a `PlaceResult` that are fetched by Place Picker. */\nexport const PLACE_RESULT_DATA_FIELDS = Object.freeze([\n  'address_component',\n  'adr_address',\n  'business_status',\n  'formatted_address',\n  'geometry',\n  'icon',\n  'icon_mask_base_uri',\n  'icon_background_color',\n  'name',\n  'photos',\n  'place_id',\n  'plus_code',\n  'type',\n  'url',\n  'utc_offset_minutes',\n] as const);\n\n/** Multiplier to scale margins and paddings based on font size. */\nconst SPACING_MULTIPLIER = 0.75;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'gmpx-place-picker': PlacePicker;\n  }\n}\n\n/**\n * The place picker component is a text input that allows end users to search\n * Google Maps’ global database for a specific address or place using\n * autocomplete.\n *\n * ![](./doc_src/place-picker.gif)\n *\n * @event {Event} gmpx-placechange - This event is fired when a Place object is\n * made available for a Place the user has selected, when user clears the input\n * after selection, or when no Place result is found based on the input query.\n * (React: onPlaceChange)\n * @event {RequestErrorEvent} gmpx-requesterror - Indicates an error condition\n * in an underlying Google Maps JavaScript API call. (React: onRequestError)\n *\n * @cssproperty [--gmpx-color-surface] - Background color of the input.\n * @cssproperty [--gmpx-color-on-surface] - Main text color.\n * @cssproperty [--gmpx-color-primary] - Color of the input focus ring.\n * @cssproperty [--gmpx-font-family-base] - Font family.\n * @cssproperty [--gmpx-font-size-base] - Font size, used to scale the\n * component.\n */\n@customElement('gmpx-place-picker')\nexport class PlacePicker extends BaseComponent {\n  static override styles = css`\n    :host(:not([hidden])) {\n      /* Match the default display style of <input> element. */\n      display: inline-block;\n    }\n\n    .container {\n      color: ${GMPX_COLOR_ON_SURFACE};\n      font: ${GMPX_FONT_BODY};\n      position: relative;\n    }\n\n    .overlay {\n      display: flex;\n      inset: 0;\n      justify-content: space-between;\n      pointer-events: none;\n      position: absolute;\n    }\n\n    .icon {\n      font-size: inherit;\n    }\n\n    input {\n      background-color: ${GMPX_COLOR_SURFACE};\n      border: 1px solid #80868b;\n      border-radius: 4px;\n      color: ${GMPX_COLOR_ON_SURFACE};\n      box-sizing: border-box;\n      font-family: inherit;\n      font-size: inherit;\n      padding: calc(${GMPX_FONT_SIZE_BASE} * ${SPACING_MULTIPLIER})\n               calc(${GMPX_FONT_SIZE_BASE} * ${SPACING_MULTIPLIER * 2 + 1});\n      width: 100%;\n    }\n\n    input:focus {\n      outline: 2px solid ${GMPX_COLOR_PRIMARY};\n    }\n\n    input::placeholder {\n      color: ${GMPX_COLOR_ON_SURFACE};\n      opacity: 0.5;\n    }\n\n    button:not([hidden]) {\n      align-items: center;\n      background: none;\n      border: none;\n      color: inherit;\n      display: flex;\n      font: inherit;\n      padding: calc(${GMPX_FONT_SIZE_BASE} * ${SPACING_MULTIPLIER});\n      pointer-events: auto;\n    }\n\n    button:enabled {\n      cursor: pointer;\n    }\n  `;\n\n  // https://lit.dev/docs/components/shadow-dom/#setting-shadowrootoptions\n  /** @ignore */\n  static override shadowRootOptions = {\n    ...BaseComponent.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  /**\n   * Restricts predictions to up to five countries identified by their ISO\n   * 3166-1 Alpha-2 country codes, case insensitive ('us', 'br', 'au', etc.).\n   *\n   * Multiple country codes can be specified in the attribute as a set of\n   * space-separated tokens (for example, \"us ca\").\n   */\n  @property({converter: STRING_ARRAY_ATTRIBUTE_CONVERTER, reflect: true})\n  country?: string[];\n\n  /**\n   * The HTML id of a `<gmp-map>` element on the page that Place Autocomplete\n   * should bind to for location biasing. Note that the map need not be a parent\n   * of the current element.\n   */\n  @property({attribute: 'for-map', reflect: true, type: String})\n  forMap?: string;\n\n  /**\n   * Location of the region to bias predictions towards (or restrict if\n   * `strict-bounds` is set), in \"lat,lng\" format.\n   *\n   * This attribute must be used in conjunction with `radius`.\n   */\n  @property({\n    attribute: 'location-bias',\n    converter: LAT_LNG_LITERAL_ATTRIBUTE_CONVERTER,\n    reflect: true,\n  })\n  locationBias?: google.maps.LatLngLiteral;\n\n  /** Placeholder text to display before the user has entered any input. */\n  @property({reflect: true, type: String}) placeholder?: string;\n\n  /**\n   * Radius of the region, in meters, to bias predictions towards.\n   *\n   * This attribute must be used in conjunction with `location-bias`.\n   */\n  @property({reflect: true, type: Number}) radius?: number;\n\n  /**\n   * If true, only predictions that are within the specified location/radius\n   * or map viewport will be returned.\n   *\n   * Setting this property to false (which is the default) will make the results\n   * biased towards, but not restricted to, places contained within the bounds.\n   */\n  @property({attribute: 'strict-bounds', reflect: true, type: Boolean})\n  strictBounds = false;\n\n  /**\n   * The type of predictions to return. Some examples include “restaurant”,\n   * “country” and “address”. This property supports any one type found in\n   * Tables 1~3 of [Place\n   * Types](https://developers.google.com/maps/documentation/javascript/supported_types).\n   *\n   * If no type is specified, predictions of all types will be returned.\n   */\n  @property({reflect: true, type: String}) type?: string;\n\n  /**\n   * This readonly property contains data about the user-selected place.\n   *\n   * If the user selects a valid place, then the object is guaranteed to contain\n   * at minimum its Place ID, along with all available [Basic Data\n   * fields](https://developers.google.com/maps/documentation/places/web-service/place-data-fields#basic).\n   *\n   * This property is undefined when user input is empty, and null when no\n   * results are found based on user input.\n   */\n  get value(): Place|null|undefined {\n    return this.valueInternal;\n  }\n  @state() private valueInternal?: Place|null;\n\n  @state() private disableSearch = true;\n  @state() private hideClearButton = true;\n\n  @query('input') private readonly inputElement?: HTMLInputElement;\n\n  @query('.clear-button')\n  private readonly clearButtonElement?: HTMLButtonElement;\n  @query('.search-button')\n  private readonly searchButtonElement?: HTMLButtonElement;\n\n  protected readonly focusController = new FocusController(this);\n\n  protected readonly fontLoader = new WebFontController(\n      this, [WebFont.GOOGLE_SANS_TEXT, WebFont.MATERIAL_SYMBOLS_OUTLINED]);\n\n  private readonly autocomplete = new Deferred<Autocomplete>();\n\n  protected override willUpdate(changedProperties: PropertyValues) {\n    if (changedProperties.has(/* @state */ 'disableSearch') &&\n        this.disableSearch && this.focusController.isKeyboardNavigating &&\n        getDeepActiveElement() === this.searchButtonElement) {\n      this.clearButtonElement?.focus();\n    }\n    if (changedProperties.has(/* @state */ 'hideClearButton') &&\n        this.hideClearButton && this.focusController.isKeyboardNavigating &&\n        getDeepActiveElement() === this.clearButtonElement) {\n      this.inputElement?.focus();\n    }\n  }\n\n  protected readonly getMsg = LocalizationController.buildLocalizer(this);\n\n  protected override render() {\n    return html`\n      <div class=\"container\">\n        <input\n          @input=${this.handleInput}\n          .placeholder=${this.placeholder ?? ''}\n        />\n        <div class=\"overlay\">\n          <button\n            aria-label=${this.getMsg('PLACE_SEARCH_ARIA_LABEL')}\n            class=\"search-button\"\n            @click=${this.handleSearch}\n            .disabled=${this.disableSearch}\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\" class=\"icon material-symbols-outlined\">\n              search\n            </span>\n          </button>\n          <button\n            aria-label=${this.getMsg('PLACE_CLEAR_ARIA_LABEL')}\n            class=\"clear-button\"\n            @click=${this.handleClear}\n            .hidden=${this.hideClearButton}\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\" class=\"icon material-symbols-outlined\">\n              cancel\n            </span>\n          </button>\n        </div>\n      </div>\n    `;\n  }\n\n  protected override firstUpdated() {\n    this.initializeAutocomplete(this.inputElement!);\n  }\n\n  protected override async updated(changedProperties: PropertyValues) {\n    if (this.autocomplete.value &&\n        this.shouldUpdateAutocompleteOptions(changedProperties)) {\n      const options = await this.makeAutocompleteOptions();\n      this.autocomplete.value.setOptions(options);\n    }\n    if (changedProperties.has('forMap') && this.forMap) {\n      const map = await this.getMapById(this.forMap);\n      map && this.bindTo(map);\n    }\n    if (changedProperties.has(/* @state */ 'valueInternal')) {\n      this.dispatchEvent(new Event('gmpx-placechange'));\n    }\n  }\n\n  /**\n   * Binds Place Autocomplete to the specified map so that its results are\n   * biased towards the map’s viewport.\n   */\n  async bindTo(map: google.maps.Map) {\n    const autocomplete = await this.autocomplete.promise;\n    autocomplete.bindTo('bounds', map);\n  }\n\n  /**\n   * Finds a `<gmp-map>` element under the same root node as this component with\n   * the specified HTML ID and returns its inner `google.maps.Map` object.\n   *\n   * Note that this method may block indefinitely if the `<gmp-map>` custom\n   * element never gets defined.\n   */\n  private async getMapById(id: string): Promise<google.maps.Map|null> {\n    const rootNode = this.getRootNode() as Document | ShadowRoot;\n    const mapElement = rootNode.getElementById(id);\n    if (mapElement?.tagName === 'GMP-MAP') {\n      await customElements.whenDefined('gmp-map');\n      return (mapElement as unknown as {innerMap: google.maps.Map}).innerMap;\n    }\n    return null;\n  }\n\n  private shouldUpdateAutocompleteOptions(changedProperties: PropertyValues):\n      boolean {\n    return changedProperties.has('country') ||\n        changedProperties.has('locationBias') ||\n        changedProperties.has('radius') ||\n        changedProperties.has('strictBounds') || changedProperties.has('type');\n  }\n\n  private async makeAutocompleteOptions(): Promise<AutocompleteOptions> {\n    const {country, locationBias, radius, strictBounds} = this;\n    let bounds;\n    if (locationBias && radius) {\n      const {Circle} =\n          await APILoader.importLibrary('maps', this) as typeof google.maps;\n      bounds =\n          new Circle({center: locationBias, radius}).getBounds() ?? undefined;\n    }\n    return {\n      bounds,\n      componentRestrictions: country ? {country} : undefined,\n      fields: [...PLACE_RESULT_DATA_FIELDS],\n      strictBounds,\n      types: this.type ? [this.type] : [],\n    };\n  }\n\n  private async initializeAutocomplete(inputElement: HTMLInputElement) {\n    const {Autocomplete} = await APILoader.importLibrary('places', this) as\n        typeof google.maps.places;\n    const autocomplete =\n        new Autocomplete(inputElement, await this.makeAutocompleteOptions());\n    autocomplete.addListener('place_changed', async () => {\n      const result = autocomplete.getPlace();\n      if (result?.place_id) {\n        this.disableSearch = true;\n        this.valueInternal = await makePlaceFromPlaceResult(result, this);\n      } else {\n        await this.handleSearch();\n      }\n    });\n    this.autocomplete.resolve(autocomplete);\n  }\n\n  /**\n   * Fetches a Place object based on input query when the user does not select\n   * one of the Place Autocomplete predictions, or null if no result is found.\n   */\n  private async search(query: string): Promise<Place|null> {\n    // tslint:disable-next-line:enforce-name-casing\n    const {Place: OrigPlace} =\n        (await APILoader.importLibrary('places', this)) as unknown as\n        PlacesLibrary;\n    // A TextSearch request containing only the Place ID field incurs no charge:\n    // https://developers.google.com/maps/documentation/places/web-service/usage-and-billing#id-textsearch.\n    const searchRequest = {\n      textQuery: query,\n      fields: ['id'],\n      locationBias: this.autocomplete.value?.getBounds(),\n    };\n    let places;\n    try {\n      ({places} = await OrigPlace.searchByText(searchRequest));\n    } catch (error: unknown) {\n      if (isNotAvailableError(error, 'searchByText()')) {\n        // `Place.searchByText()` isn't available in GA; use\n        // `PlacesService.findPlaceFromQuery()` as a fallback.\n        const findRequest = {\n          query,\n          fields: ['id'],\n          locationBias: this.autocomplete.value?.getBounds(),\n        };\n        const results = await this.searchWithFindPlaceFromQuery(findRequest);\n        places = [];\n        for (const placeResult of results) {\n          places.push(await makePlaceFromPlaceResult(placeResult, this));\n          break;\n        }\n      } else {\n        throw error;\n      }\n    }\n    if (!places.length) return null;\n    await places[0].fetchFields({fields: [...PLACE_DATA_FIELDS]});\n    return places[0] as Place;\n  }\n\n  /** Looks up a Place using the GA API. */\n  private async searchWithFindPlaceFromQuery(\n      request: google.maps.places.FindPlaceFromQueryRequest):\n      Promise<PlaceResult[]> {\n    const {PlacesService} = await APILoader.importLibrary('places', this) as\n        google.maps.PlacesLibrary;\n    const service = new PlacesService(document.createElement('div'));\n    return new Promise((resolve, reject) => {\n      service.findPlaceFromQuery(\n          {\n            ...request,\n            fields: mapPlaceFieldsToPlaceResultFields(\n                request.fields as Array<keyof Place>)\n          },\n          (results, status) => {\n            if (results && status === 'OK') {\n              resolve(results);\n            } else {\n              reject(status);\n            }\n          });\n    });\n  }\n\n  private handleClear() {\n    this.inputElement!.value = '';\n    this.valueInternal = undefined;\n    this.disableSearch = true;\n    this.hideClearButton = true;\n  }\n\n  private handleInput(e: {target: HTMLInputElement}) {\n    if (!e.target.value) {\n      this.handleClear();\n    } else {\n      this.disableSearch = false;\n      this.hideClearButton = false;\n    }\n  }\n\n  private async handleSearch() {\n    if (this.disableSearch || !this.inputElement?.value) return;\n\n    this.disableSearch = true;\n    try {\n      this.valueInternal = await this.search(this.inputElement.value);\n      if (this.valueInternal) this.updateInputTextFromPlace(this.valueInternal);\n    } catch (error: unknown) {\n      const requestErrorEvent = new RequestErrorEvent(error);\n      this.dispatchEvent(requestErrorEvent);\n    }\n  }\n\n  private updateInputTextFromPlace(place: Place) {\n    let newText;\n    if (place.formattedAddress && place.displayName) {\n      if (place.formattedAddress.startsWith(place.displayName)) {\n        newText = place.formattedAddress;\n      } else {\n        newText = `${place.displayName}, ${place.formattedAddress}`;\n      }\n    } else {\n      newText = place.displayName ?? place.formattedAddress ?? '';\n    }\n    if (newText) this.inputElement!.value = newText;\n  }\n}\n"]}