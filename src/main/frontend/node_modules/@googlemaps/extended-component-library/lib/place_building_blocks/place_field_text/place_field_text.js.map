{"version":3,"file":"place_field_text.js","sourceRoot":"","sources":["../../../src/place_building_blocks/place_field_text/place_field_text.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {html} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\n\nimport {LocalizationController} from '../../base/localization_controller.js';\nimport type {Place} from '../../utils/googlemaps_types.js';\nimport {PlaceDataConsumer} from '../place_data_consumer.js';\n\n\n/**\n * Supported field names for `PlaceFieldText`, formatted as `Place` fields.\n */\nexport const PLACE_TEXT_FIELDS = [\n  'businessStatus',\n  'displayName',\n  'formattedAddress',\n  'id',\n  'internationalPhoneNumber',\n  'location',\n  'location.lat',\n  'location.lng',\n  'nationalPhoneNumber',\n  'plusCode.compoundCode',\n  'plusCode.globalCode',\n  'rating',\n  'types',\n  'userRatingCount',\n] as const;\n\n/**\n * Supported field names for `PlaceFieldText`, formatted as `PlaceResult`\n * fields.\n */\nexport const PLACE_RESULT_TEXT_FIELDS = [\n  'business_status',\n  'name',\n  'formatted_address',\n  'place_id',\n  'international_phone_number',\n  'geometry.location',\n  'geometry.location.lat',\n  'geometry.location.lng',\n  'formatted_phone_number',\n  'plus_code.compound_code',\n  'plus_code.global_code',\n  'rating',\n  'types',\n  'user_ratings_total',\n] as const;\n\ntype PlaceTextField = typeof PLACE_TEXT_FIELDS[number];\ntype PlaceResultTextField = typeof PLACE_RESULT_TEXT_FIELDS[number];\n/**\n * String union type of all supported field names for `PlaceFieldText`.\n */\nexport type TextField = PlaceTextField|PlaceResultTextField;\n\n/**\n * Place types that can be rendered by PlaceFieldText. These are the \"Table 1\"\n * place types documented at:\n *\n * https://developers.google.com/maps/documentation/places/web-service/supported_types\n */\nconst ALLOWED_PLACE_TYPES = new Set([\n  'accounting',\n  'airport',\n  'amusement_park',\n  'aquarium',\n  'art_gallery',\n  'atm',\n  'bakery',\n  'bank',\n  'bar',\n  'beauty_salon',\n  'bicycle_store',\n  'book_store',\n  'bowling_alley',\n  'bus_station',\n  'cafe',\n  'campground',\n  'car_dealer',\n  'car_rental',\n  'car_repair',\n  'car_wash',\n  'casino',\n  'cemetery',\n  'church',\n  'city_hall',\n  'clothing_store',\n  'convenience_store',\n  'courthouse',\n  'dentist',\n  'department_store',\n  'doctor',\n  'drugstore',\n  'electrician',\n  'electronics_store',\n  'embassy',\n  'fire_station',\n  'florist',\n  'funeral_home',\n  'furniture_store',\n  'gas_station',\n  'gym',\n  'hair_care',\n  'hardware_store',\n  'hindu_temple',\n  'home_goods_store',\n  'hospital',\n  'insurance_agency',\n  'jewelry_store',\n  'laundry',\n  'lawyer',\n  'library',\n  'light_rail_station',\n  'liquor_store',\n  'local_government_office',\n  'locksmith',\n  'lodging',\n  'meal_delivery',\n  'meal_takeaway',\n  'mosque',\n  'movie_rental',\n  'movie_theater',\n  'moving_company',\n  'museum',\n  'night_club',\n  'painter',\n  'park',\n  'parking',\n  'pet_store',\n  'pharmacy',\n  'physiotherapist',\n  'plumber',\n  'police',\n  'post_office',\n  'primary_school',\n  'real_estate_agency',\n  'restaurant',\n  'roofing_contractor',\n  'rv_park',\n  'school',\n  'secondary_school',\n  'shoe_store',\n  'shopping_mall',\n  'spa',\n  'stadium',\n  'storage',\n  'store',\n  'subway_station',\n  'supermarket',\n  'synagogue',\n  'taxi_stand',\n  'tourist_attraction',\n  'train_station',\n  'transit_station',\n  'travel_agency',\n  'university',\n  'veterinary_care',\n  'zoo',\n]);\n\nfunction toPlaceTextField(field: TextField): PlaceTextField {\n  switch (field) {\n    case 'business_status':\n      return 'businessStatus';\n    case 'name':\n      return 'displayName';\n    case 'formatted_address':\n      return 'formattedAddress';\n    case 'place_id':\n      return 'id';\n    case 'international_phone_number':\n      return 'internationalPhoneNumber';\n    case 'geometry.location':\n      return 'location';\n    case 'geometry.location.lat':\n      return 'location.lat';\n    case 'geometry.location.lng':\n      return 'location.lng';\n    case 'formatted_phone_number':\n      return 'nationalPhoneNumber';\n    case 'plus_code.compound_code':\n      return 'plusCode.compoundCode';\n    case 'plus_code.global_code':\n      return 'plusCode.globalCode';\n    case 'rating':\n      return 'rating';\n    case 'user_ratings_total':\n      return 'userRatingCount';\n    default:\n      return field;\n  }\n}\n\nfunction getTopLevelPlaceField(field: TextField): keyof Place {\n  return toPlaceTextField(field).split('.')[0] as keyof Place;\n}\n\n/**\n * Component that renders a string or numeric field of a `Place` or\n * `PlaceResult` as text. It can also render the field \"types\", in which case it\n * will show only the most applicable place type, if available.\n */\n@customElement('gmpx-place-field-text')\nexport class PlaceFieldText extends PlaceDataConsumer {\n  /**\n   * The field to display, formatted as it is on either a `Place` or\n   * `PlaceResult`.\n   *\n   * Allowed [`Place`\n   * fields](https://developers.google.com/maps/documentation/javascript/reference/place)\n   * are: `businessStatus`, `displayName`, `formattedAddress`, `id`,\n   * `internationalPhoneNumber`, `location`, `location.lat`, `location.lng`,\n   * `nationalPhoneNumber`, `plusCode.compoundCode`, `plusCode.globalCode`,\n   * `rating`, `types`, and `userRatingCount`.\n   *\n   * You may also specify one of the equivalent [`PlaceResult` field\n   * names](https://developers.google.com/maps/documentation/javascript/reference/places-service#PlaceResult):\n   * `business_status`, `name`, `formatted_address`, `place_id`,\n   * `international_phone_number`, `geometry.location`, `geometry.location.lat`,\n   * `geometry.location.lng`, `formatted_phone_number`,\n   * `plus_code.compound_code`, `plus_code.global_code`, `rating`, `types`,\n   * and `user_ratings_total`.\n   */\n  @property({type: String, reflect: true}) field?: TextField;\n\n  protected readonly getMsg = LocalizationController.buildLocalizer(this);\n\n  protected override render() {\n    return html`<span>${this.getDisplayText()}</span>`;\n  }\n\n  /** @ignore */\n  getRequiredFields(): Array<keyof Place> {\n    return this.field ? [getTopLevelPlaceField(this.field)] : [];\n  }\n\n  protected override placeHasData(place: Place): boolean {\n    return !!(this.field && this.getFieldValue(place, this.field) != null);\n  }\n\n  private getDisplayText(): string {\n    const place = this.getPlace();\n    if (!place || !this.field) return '';\n    return this.getFieldValue(place, this.field) ?? '';\n  }\n\n  private getFieldValue(place: Place, field: TextField): string|null|undefined {\n    switch (toPlaceTextField(field)) {\n      case 'businessStatus':\n        return this.renderBusinessStatus(place.businessStatus);\n      case 'displayName':\n        return place.displayName;\n      case 'formattedAddress':\n        return place.formattedAddress;\n      case 'id':\n        return place.id;\n      case 'internationalPhoneNumber':\n        return place.internationalPhoneNumber;\n      case 'location':\n        return place.location?.toString();\n      case 'location.lat':\n        return place.location?.lat().toString();\n      case 'location.lng':\n        return place.location?.lng().toString();\n      case 'nationalPhoneNumber':\n        return place.nationalPhoneNumber;\n      case 'plusCode.compoundCode':\n        return place.plusCode?.compoundCode;\n      case 'plusCode.globalCode':\n        return place.plusCode?.globalCode;\n      case 'rating':\n        return place.rating?.toString();\n      case 'types':\n        return place.types && this.getDisplayType(place.types);\n      case 'userRatingCount':\n        return place.userRatingCount?.toString();\n      default:\n        return undefined;\n    }\n  }\n\n  private renderBusinessStatus(status: google.maps.places.BusinessStatus|null|\n                               undefined): string|null|undefined {\n    if (!status) return status;\n    switch (status) {\n      case 'CLOSED_PERMANENTLY' as google.maps.places.BusinessStatus:\n        return this.getMsg('PLACE_CLOSED_PERMANENTLY');\n      case 'CLOSED_TEMPORARILY' as google.maps.places.BusinessStatus:\n        return this.getMsg('PLACE_CLOSED_TEMPORARILY');\n      case 'OPERATIONAL' as google.maps.places.BusinessStatus:\n        return this.getMsg('PLACE_OPERATIONAL');\n      default:\n        return undefined;\n    }\n  }\n\n  /**\n   * From a list of multiple place types, returns the formatted type to be\n   * rendered by PlaceFieldText.\n   *\n   * @param placeTypes - A list of place types\n   * @return The first allowed place type in the list, formatted for display,\n   *     or null if there is no allowed type.\n   */\n  private getDisplayType(placeTypes: string[]): string|null {\n    for (const placeType of placeTypes) {\n      if (ALLOWED_PLACE_TYPES.has(placeType)) {\n        return this.getMsg('PLACE_TYPE', placeType);\n      }\n    }\n    return null;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'gmpx-place-field-text': PlaceFieldText;\n  }\n}\n"]}