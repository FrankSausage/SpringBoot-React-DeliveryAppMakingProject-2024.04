{"version":3,"file":"place_directions_button.js","sourceRoot":"","sources":["../../../src/place_building_blocks/place_directions_button/place_directions_button.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport '../../icon_button/icon_button.js';\n\nimport {html} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\n\nimport type {Place} from '../../utils/googlemaps_types.js';\nimport {makeWaypoint, WaypointInfo} from '../../utils/place_utils.js';\nimport {PlaceDataConsumer} from '../place_data_consumer.js';\n\n\n/**\n * Creates a Google Maps URL for directions from origin to destination\n * (https://developers.google.com/maps/documentation/urls#directions-action).\n */\nfunction buildMapsDirectionsURL(\n    origin?: WaypointInfo, destination?: WaypointInfo): string {\n  let url = 'https://www.google.com/maps/dir/?api=1';\n  if (origin) {\n    url = appendEncodedWaypointURLParams(url, 'origin', origin);\n  }\n  if (destination) {\n    url = appendEncodedWaypointURLParams(url, 'destination', destination);\n  }\n  return url;\n}\n\n/**\n * Appends encoded URL parameters to a Google Maps Directions URL based on\n * waypoint information. Always includes a Place ID if it is specified by the\n * waypoint. Describes waypoint by query if available, or \"lat,lng\" otherwise.\n */\nfunction appendEncodedWaypointURLParams(\n    url: string, side: 'origin'|'destination', waypoint: WaypointInfo): string {\n  if (waypoint.placeId) {\n    url += `&${side}_place_id=${waypoint.placeId}`;\n  }\n  if (waypoint.query) {\n    url += `&${side}=${encodeURIComponent(waypoint.query)}`;\n  } else if (waypoint.location) {\n    url += `&${side}=${waypoint.location.lat},${waypoint.location.lng}`;\n  } else if (waypoint.placeId) {\n    // A Place ID can be used as an origin/destination, but it *must* be\n    // accompanied by a query.\n    url += `&${side}=${encodeURIComponent('Selected Place')}`;\n  }\n  return url;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'gmpx-place-directions-button': PlaceDirectionsButton;\n  }\n}\n\n/**\n * Component that opens a new tab with directions to this place in Google Maps.\n *\n * @slot - Content to display as the button’s label.\n *\n * @cssproperty [--gmpx-color-primary] - Button text and outline color in the\n * `outlined` variant, or background color in `filled` variant.\n * @cssproperty [--gmpx-color-on-primary] - Button text color in `filled`\n * variant.\n * @cssproperty [--gmpx-font-size-base] - Font size for the button.\n * @cssproperty [--gmpx-font-family-headings] - Font face for the button, except\n * for condensed mode.\n * @cssproperty [--gmpx-font-family-base] - Font face used when the button is in\n * condensed mode.\n */\n@customElement('gmpx-place-directions-button')\nexport class PlaceDirectionsButton extends PlaceDataConsumer {\n  // https://lit.dev/docs/components/shadow-dom/#setting-shadowrootoptions\n  /** @ignore */\n  static override shadowRootOptions = {\n    ...PlaceDataConsumer.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  /**\n   * A description that gets read by assistive devices. In the case of icon-only\n   * buttons, you should always include an ARIA label for optimal accessibility.\n   */\n  @property({attribute: 'aria-label', reflect: true, type: String})\n  override ariaLabel = null;\n\n  /**\n   * Whether to render the button in a condensed layout, where the label appears\n   * below the icon.\n   */\n  @property({reflect: true, type: Boolean}) condensed = false;\n\n  /**\n   * Optionally specify the starting location or Place. Otherwise Google Maps\n   * will ask for or estimate the user’s starting location.\n   */\n  @property({attribute: false})\n  origin?: google.maps.LatLng|google.maps.LatLngLiteral|Place;\n\n  /** Get directions from destination to origin instead. */\n  @property({reflect: true, type: Boolean}) reversed = false;\n\n  /** Specifies the display style of the button. */\n  @property({reflect: true, type: String})\n  variant: 'outlined'|'filled' = 'outlined';\n\n  protected override render() {\n    return html`\n      <gmpx-icon-button\n        .ariaLabel=${this.ariaLabel}\n        .condensed=${this.condensed}\n        .href=${this.getHref()}\n        icon=\"directions\"\n        .variant=${this.variant}\n      >\n        <slot></slot>\n      </gmpx-icon-button>\n    `;\n  }\n\n  protected override updated() {\n    // If the aria-label attribute is set, hide it from the a11y tree. Otherwise\n    // the component and its shadow DOM content show up as duplicate nodes with\n    // the same aria-label.\n    this.role = this.ariaLabel != null ? 'none' : null;\n  }\n\n  /** @ignore */\n  getRequiredFields(): Array<keyof Place> {\n    return ['displayName', 'formattedAddress', 'location'];\n  }\n\n  protected override placeHasData(place: Place): boolean {\n    // A Place requires a Place ID, which is enough to generate a link.\n    return true;\n  }\n\n  private getHref(): string {\n    const place = this.getPlace();\n    const origin = this.reversed ? place : this.origin;\n    const destination = this.reversed ? this.origin : place;\n    return buildMapsDirectionsURL(\n        origin ? makeWaypoint(origin) : undefined,\n        destination ? makeWaypoint(destination) : undefined);\n  }\n}\n"]}